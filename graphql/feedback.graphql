type Feedback {
    id: ID!
    registration_id: String!
    event_id: String!
    rating: Int!
    comments: String
    registration: Registration @belongsTo
    event: Event @belongsTo
    created_at: DateTime
    updated_at: DateTime
}

input CreateFeedbackInput {
    registration_id: String!
    event_id: String!
    rating: Int!
    comments: String
}

input UpdateFeedbackInput {
    registration_id: String
    event_id: String
    rating: Int
    comments: String
}

extend type Query {
    feedbacks: [Feedback!]! @middleware(checks: ["jwt.auth", "active"]) @all

    "Lấy tất cả feedbacks của một user dựa trên registration"
    feedbacksByUser(user_id: String!): [Feedback!]!
        @middleware(checks: ["jwt.auth", "active"])
        @field(resolver: "App\\GraphQL\\Queries\\FeedbackResolver@byUser")
}

extend type Mutation {
    createFeedback(input: CreateFeedbackInput!): Feedback!
        @middleware(checks: ["jwt.auth", "active"])
        @field(resolver: "App\\GraphQL\\Mutations\\FeedbackMutation@create")
    updateFeedback(id: ID!, input: UpdateFeedbackInput!): Feedback!
        @middleware(checks: ["jwt.auth", "active"])
        @field(resolver: "App\\GraphQL\\Mutations\\FeedbackMutation@update")
    deleteFeedback(id: ID!): Feedback!
        @middleware(checks: ["jwt.auth", "active"])
        @field(resolver: "App\\GraphQL\\Mutations\\FeedbackMutation@delete")
}
